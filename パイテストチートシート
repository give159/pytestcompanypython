# pytest å®Œå…¨ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ ğŸš€

## ğŸ“š ç›®æ¬¡
- [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
- [åŸºæœ¬æ§‹é€ ](#åŸºæœ¬æ§‹é€ )
- [assertæ–‡](#assertæ–‡)
- [ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£](#ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£)
- [ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆ](#ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆ)
- [ä¾‹å¤–ãƒ†ã‚¹ãƒˆ](#ä¾‹å¤–ãƒ†ã‚¹ãƒˆ)
- [ãƒãƒ¼ã‚«ãƒ¼](#ãƒãƒ¼ã‚«ãƒ¼)
- [ãƒ¢ãƒƒã‚¯](#ãƒ¢ãƒƒã‚¯)
- [å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³](#å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³)
- [ä¾¿åˆ©ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯](#ä¾¿åˆ©ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯)

---

## ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# pytestã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pytest

# ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«ã‚‚ä¸€ç·’ã«
pip install pytest-cov

# ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆPython 3.3+ã¯æ¨™æº–è£…å‚™ï¼‰
# unittest.mock ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```

---

## ğŸ—ï¸ åŸºæœ¬æ§‹é€ 

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
project/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ calculator.py      # ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_calculator.py # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â””â”€â”€ pytest.ini             # pytestè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

### å‘½åè¦å‰‡

| è¦ç´  | è¦å‰‡ | ä¾‹ |
|------|------|-----|
| ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | `test_*.py` ã¾ãŸã¯ `*_test.py` | `test_user.py` |
| ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ | `Test*` | `TestUser` |
| ãƒ†ã‚¹ãƒˆé–¢æ•° | `test_*` | `test_login` |

### æœ€å°ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

```python
# test_sample.py
def test_addition():
    assert 1 + 1 == 2
```

```bash
# å®Ÿè¡Œ
pytest test_sample.py
```

---

## âœ… assertæ–‡

### åŸºæœ¬ã®assert

```python
# ç­‰ä¾¡æ¯”è¼ƒ
assert x == y
assert x != y

# çœŸå½å€¤
assert x
assert not x
assert x is True
assert x is False

# Noneåˆ¤å®š
assert x is None
assert x is not None

# æ¯”è¼ƒ
assert x > y
assert x >= y
assert x < y
assert x <= y

# åŒ…å«
assert 'hello' in text
assert 'hello' not in text
assert item in list_obj

# å‹ãƒã‚§ãƒƒã‚¯
assert isinstance(x, int)
assert type(x) == str
```

### ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

```python
assert x == y, f"Expected {y}, but got {x}"
assert len(items) > 0, "ãƒªã‚¹ãƒˆãŒç©ºã§ã™"
```

### è¤‡æ•°æ¡ä»¶

```python
# ã™ã¹ã¦True
assert all([x > 0, y > 0, z > 0])

# å°‘ãªãã¨ã‚‚1ã¤True
assert any([x > 0, y > 0, z > 0])
```

---

## ğŸ¯ ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£

### åŸºæœ¬ã®ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£

```python
import pytest

@pytest.fixture
def sample_user():
    """ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ"""
    return {"name": "å¤ªéƒ", "age": 30}

def test_user_name(sample_user):
    assert sample_user["name"] == "å¤ªéƒ"
```

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ãƒ†ã‚£ã‚¢ãƒ€ã‚¦ãƒ³

```python
@pytest.fixture
def database_connection():
    # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    db = Database()
    db.connect()
    
    yield db  # ãƒ†ã‚¹ãƒˆã«æ¸¡ã™
    
    # ãƒ†ã‚£ã‚¢ãƒ€ã‚¦ãƒ³
    db.disconnect()

def test_query(database_connection):
    result = database_connection.query("SELECT * FROM users")
    assert len(result) > 0
```

### ã‚¹ã‚³ãƒ¼ãƒ—è¨­å®š

```python
@pytest.fixture(scope="function")  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå„ãƒ†ã‚¹ãƒˆã”ã¨
def func_fixture():
    pass

@pytest.fixture(scope="class")  # ã‚¯ãƒ©ã‚¹ã”ã¨
def class_fixture():
    pass

@pytest.fixture(scope="module")  # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã”ã¨
def module_fixture():
    pass

@pytest.fixture(scope="session")  # ãƒ†ã‚¹ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨ä½“ã§1å›
def session_fixture():
    pass
```

### autouseï¼ˆè‡ªå‹•å®Ÿè¡Œï¼‰

```python
@pytest.fixture(autouse=True)
def setup_and_teardown():
    """å…¨ãƒ†ã‚¹ãƒˆã§è‡ªå‹•å®Ÿè¡Œ"""
    print("ãƒ†ã‚¹ãƒˆå‰å‡¦ç†")
    yield
    print("ãƒ†ã‚¹ãƒˆå¾Œå‡¦ç†")
```

### conftest.pyï¼ˆå…±æœ‰ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ï¼‰

```python
# tests/conftest.py
import pytest

@pytest.fixture
def shared_data():
    """å…¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ãˆã‚‹ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£"""
    return {"key": "value"}
```

---

## ğŸ” ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆ

### åŸºæœ¬ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–

```python
@pytest.mark.parametrize("input,expected", [
    (1, 2),
    (2, 4),
    (3, 6),
])
def test_double(input, expected):
    assert input * 2 == expected
```

### è¤‡æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

```python
@pytest.mark.parametrize("x", [1, 2, 3])
@pytest.mark.parametrize("y", [10, 20])
def test_multiply(x, y):
    assert x * y == y * x
```

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«IDã‚’ä»˜ã‘ã‚‹

```python
@pytest.mark.parametrize("input,expected", [
    (1, 2),
    (2, 4),
    (3, 6),
], ids=["one", "two", "three"])
def test_double(input, expected):
    assert input * 2 == expected
```

### è¾æ›¸å½¢å¼

```python
test_data = [
    {"input": 1, "expected": 2},
    {"input": 2, "expected": 4},
    {"input": 3, "expected": 6},
]

@pytest.mark.parametrize("data", test_data)
def test_double(data):
    assert data["input"] * 2 == data["expected"]
```

---

## ğŸš¨ ä¾‹å¤–ãƒ†ã‚¹ãƒˆ

### ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚’ç¢ºèª

```python
import pytest

def test_zero_division():
    with pytest.raises(ZeroDivisionError):
        1 / 0

# ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ç¢ºèª
def test_value_error():
    with pytest.raises(ValueError, match="invalid literal"):
        int("abc")

# ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—
def test_custom_exception():
    with pytest.raises(ValueError) as exc_info:
        raise ValueError("ã‚¨ãƒ©ãƒ¼ã§ã™")
    
    assert "ã‚¨ãƒ©ãƒ¼" in str(exc_info.value)
```

### ä¾‹å¤–ãŒç™ºç”Ÿã—ãªã„ã“ã¨ã‚’ç¢ºèª

```python
def test_no_exception():
    try:
        result = 10 / 2
        assert result == 5
    except Exception as e:
        pytest.fail(f"ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
```

---

## ğŸ·ï¸ ãƒãƒ¼ã‚«ãƒ¼

### åŸºæœ¬ãƒãƒ¼ã‚«ãƒ¼

```python
# ã‚¹ã‚­ãƒƒãƒ—
@pytest.mark.skip(reason="ã¾ã å®Ÿè£…ã—ã¦ã„ãªã„")
def test_future_feature():
    pass

# æ¡ä»¶ä»˜ãã‚¹ã‚­ãƒƒãƒ—
import sys
@pytest.mark.skipif(sys.version_info < (3, 8), reason="Python 3.8ä»¥ä¸ŠãŒå¿…è¦")
def test_new_feature():
    pass

# å¤±æ•—ãŒäºˆæƒ³ã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆ
@pytest.mark.xfail(reason="æ—¢çŸ¥ã®ãƒã‚°")
def test_known_bug():
    assert False
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼

```python
# pytest.ini ã¾ãŸã¯ pyproject.toml ã§å®šç¾©
# markers =
#     slow: æ™‚é–“ãŒã‹ã‹ã‚‹ãƒ†ã‚¹ãƒˆ
#     integration: çµ±åˆãƒ†ã‚¹ãƒˆ

@pytest.mark.slow
def test_heavy_computation():
    # æ™‚é–“ãŒã‹ã‹ã‚‹å‡¦ç†
    pass

@pytest.mark.integration
def test_api_integration():
    # APIçµ±åˆãƒ†ã‚¹ãƒˆ
    pass
```

```bash
# ç‰¹å®šã®ãƒãƒ¼ã‚«ãƒ¼ã®ã¿å®Ÿè¡Œ
pytest -m slow
pytest -m "not slow"
pytest -m "integration and not slow"
```

---

## ğŸ­ ãƒ¢ãƒƒã‚¯

### åŸºæœ¬ã®ãƒ¢ãƒƒã‚¯

```python
from unittest.mock import Mock, patch

def test_mock_basic():
    mock_obj = Mock()
    mock_obj.method.return_value = 42
    
    result = mock_obj.method()
    assert result == 42
    mock_obj.method.assert_called_once()
```

### é–¢æ•°ã®ãƒ¢ãƒƒã‚¯

```python
from unittest.mock import patch

def get_user_name():
    # å¤–éƒ¨APIã‚’å‘¼ã¶é–¢æ•°
    return fetch_from_api()

@patch('module.fetch_from_api')
def test_get_user_name(mock_fetch):
    mock_fetch.return_value = "å¤ªéƒ"
    
    result = get_user_name()
    assert result == "å¤ªéƒ"
```

### ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¢ãƒƒã‚¯

```python
@patch('module.ClassName.method_name')
def test_class_method(mock_method):
    mock_method.return_value = "ãƒ¢ãƒƒã‚¯çµæœ"
    # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```

### è¤‡æ•°ã®ãƒ¢ãƒƒã‚¯

```python
@patch('module.function_b')
@patch('module.function_a')
def test_multiple_mocks(mock_a, mock_b):
    # æ³¨æ„: ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¯ä¸‹ã‹ã‚‰ä¸Šã®é †ã§é©ç”¨ã•ã‚Œã‚‹
    mock_a.return_value = 1
    mock_b.return_value = 2
```

### ãƒ¢ãƒƒã‚¯ã®æ¤œè¨¼

```python
def test_mock_verification():
    mock = Mock()
    mock.method(1, 2, key="value")
    
    # å‘¼ã³å‡ºã—å›æ•°
    mock.method.assert_called_once()
    mock.method.assert_called_once_with(1, 2, key="value")
    
    # è¤‡æ•°å›å‘¼ã³å‡ºã—
    mock.method(3, 4)
    assert mock.method.call_count == 2
    
    # å‘¼ã³å‡ºã—å¼•æ•°ã®ç¢ºèª
    mock.method.assert_any_call(1, 2, key="value")
```

---

## ğŸ® å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«
pytest test_user.py

# ç‰¹å®šã®ã‚¯ãƒ©ã‚¹
pytest test_user.py::TestUser

# ç‰¹å®šã®ãƒ¡ã‚½ãƒƒãƒ‰
pytest test_user.py::TestUser::test_login

# ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ
pytest -k "login"  # loginã‚’å«ã‚€ãƒ†ã‚¹ãƒˆã®ã¿
pytest -k "not slow"  # slowã‚’å«ã¾ãªã„ãƒ†ã‚¹ãƒˆã®ã¿
```

### å‡ºåŠ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# è©³ç´°è¡¨ç¤º
pytest -v

# è¶…è©³ç´°è¡¨ç¤º
pytest -vv

# ç°¡æ½”è¡¨ç¤º
pytest -q

# å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®è©³ç´°ã‚’è¡¨ç¤º
pytest -l

# æ¨™æº–å‡ºåŠ›ã‚‚è¡¨ç¤º
pytest -s

# æœ€åˆã®å¤±æ•—ã§åœæ­¢
pytest -x

# Nå€‹å¤±æ•—ã—ãŸã‚‰åœæ­¢
pytest --maxfail=3
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬
pytest --cov=src

# HTMLãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
pytest --cov=src --cov-report=html

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§è©³ç´°è¡¨ç¤º
pytest --cov=src --cov-report=term-missing
```

### å®Ÿè¡Œé€Ÿåº¦

```bash
# ä¸¦åˆ—å®Ÿè¡Œï¼ˆpytest-xdistå¿…è¦ï¼‰
pip install pytest-xdist
pytest -n auto  # CPUæ•°ã«å¿œã˜ã¦è‡ªå‹•

# é…ã„ãƒ†ã‚¹ãƒˆã‚’è¡¨ç¤º
pytest --durations=10
```

### ãã®ä»–

```bash
# å‰å›å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ã¿å†å®Ÿè¡Œ
pytest --lf

# å‰å›å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã‹ã‚‰å®Ÿè¡Œ
pytest --ff

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆå®Ÿéš›ã«ã¯å®Ÿè¡Œã—ãªã„ï¼‰
pytest --collect-only

# ãƒ†ã‚¹ãƒˆã®ä¸€è¦§ã‚’è¡¨ç¤º
pytest --collect-only -q
```

---

## ğŸ› ï¸ ä¾¿åˆ©ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### capsysï¼ˆæ¨™æº–å‡ºåŠ›ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ï¼‰

```python
def test_print_output(capsys):
    print("Hello, World!")
    captured = capsys.readouterr()
    assert "Hello" in captured.out
    assert captured.err == ""  # ã‚¨ãƒ©ãƒ¼å‡ºåŠ›
```

### tmpdirï¼ˆä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰

```python
def test_file_operations(tmpdir):
    # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
    file = tmpdir.join("test.txt")
    file.write("ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿")
    
    # èª­ã¿è¾¼ã¿
    assert file.read() == "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿"
    # ãƒ†ã‚¹ãƒˆå¾Œã€è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã‚‹
```

### monkeypatchï¼ˆå‹•çš„ãªãƒ‘ãƒƒãƒï¼‰

```python
def test_env_variable(monkeypatch):
    # ç’°å¢ƒå¤‰æ•°ã‚’ä¸€æ™‚çš„ã«è¨­å®š
    monkeypatch.setenv("API_KEY", "test_key")
    
    import os
    assert os.getenv("API_KEY") == "test_key"
    # ãƒ†ã‚¹ãƒˆå¾Œã€è‡ªå‹•çš„ã«å…ƒã«æˆ»ã‚‹
```

### ãƒ†ã‚¹ãƒˆé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰

```python
import pytest

class TestDataSharing:
    @pytest.fixture(scope="class")
    def shared_resource(self):
        return {"counter": 0}
    
    def test_first(self, shared_resource):
        shared_resource["counter"] += 1
        assert shared_resource["counter"] == 1
    
    def test_second(self, shared_resource):
        shared_resource["counter"] += 1
        assert shared_resource["counter"] == 2
```

### è¤‡æ•°ã®assertã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```python
def test_multiple_checks():
    user = {"name": "å¤ªéƒ", "age": 30, "email": "test@example.com"}
    
    assert user["name"] == "å¤ªéƒ", "åå‰ãŒä¸€è‡´ã—ã¾ã›ã‚“"
    assert user["age"] == 30, "å¹´é½¢ãŒä¸€è‡´ã—ã¾ã›ã‚“"
    assert "@" in user["email"], "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸æ­£ã§ã™"
```

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«åŒ–

```python
import json
import pytest

@pytest.fixture
def test_data():
    with open('tests/data/test_data.json') as f:
        return json.load(f)

def test_with_external_data(test_data):
    assert test_data["expected_result"] == 42
```

---

## ğŸ“ pytest.ini è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```ini
# pytest.ini
[pytest]
# ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
testpaths = tests

# Pythonãƒ‘ã‚¹
pythonpath = src

# ãƒãƒ¼ã‚«ãƒ¼å®šç¾©
markers =
    slow: æ™‚é–“ãŒã‹ã‹ã‚‹ãƒ†ã‚¹ãƒˆ
    integration: çµ±åˆãƒ†ã‚¹ãƒˆ
    unit: å˜ä½“ãƒ†ã‚¹ãƒˆ

# å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³
addopts = 
    -v
    --strict-markers
    --cov=src
    --cov-report=html

# è­¦å‘Šãƒ•ã‚£ãƒ«ã‚¿
filterwarnings =
    ignore::DeprecationWarning
```

---

## ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ†ã‚¹ãƒˆæ§‹é€ ï¼ˆAAA ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

```python
def test_user_registration():
    # Arrangeï¼ˆæº–å‚™ï¼‰
    username = "test_user"
    email = "test@example.com"
    
    # Actï¼ˆå®Ÿè¡Œï¼‰
    user = create_user(username, email)
    
    # Assertï¼ˆæ¤œè¨¼ï¼‰
    assert user.username == username
    assert user.email == email
    assert user.is_active is True
```

### ãƒ†ã‚¹ãƒˆå‘½åè¦å‰‡

```python
# âŒ æ‚ªã„ä¾‹
def test1():
    pass

def test_func():
    pass

# âœ… è‰¯ã„ä¾‹
def test_user_login_with_valid_credentials():
    pass

def test_user_login_with_invalid_password_returns_error():
    pass

def test_empty_cart_total_is_zero():
    pass
```

### 1ãƒ†ã‚¹ãƒˆ1æ¤œè¨¼

```python
# âŒ æ‚ªã„ä¾‹ï¼š1ã¤ã®ãƒ†ã‚¹ãƒˆã§è¤‡æ•°ã®æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
def test_user_operations():
    user = create_user()
    assert user.name == "å¤ªéƒ"
    
    user.update_email("new@example.com")
    assert user.email == "new@example.com"
    
    user.delete()
    assert user.is_deleted is True

# âœ… è‰¯ã„ä¾‹ï¼šæ©Ÿèƒ½ã”ã¨ã«åˆ†å‰²
def test_user_creation():
    user = create_user()
    assert user.name == "å¤ªéƒ"

def test_user_email_update():
    user = create_user()
    user.update_email("new@example.com")
    assert user.email == "new@example.com"

def test_user_deletion():
    user = create_user()
    user.delete()
    assert user.is_deleted is True
```

---

## ğŸ“š ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰æ—©è¦‹è¡¨

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `pytest` | ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ |
| `pytest -v` | è©³ç´°è¡¨ç¤º |
| `pytest -x` | æœ€åˆã®å¤±æ•—ã§åœæ­¢ |
| `pytest -k login` | loginã‚’å«ã‚€ãƒ†ã‚¹ãƒˆã®ã¿ |
| `pytest -m slow` | slowãƒãƒ¼ã‚«ãƒ¼ã®ã¿ |
| `pytest --lf` | å‰å›å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ã¿ |
| `pytest --cov=src` | ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ |
| `pytest -n auto` | ä¸¦åˆ—å®Ÿè¡Œ |
| `pytest --durations=10` | é…ã„ãƒ†ã‚¹ãƒˆè¡¨ç¤º |
| `pytest --collect-only` | ãƒ†ã‚¹ãƒˆä¸€è¦§è¡¨ç¤º |

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://docs.pytest.org/
- pytest-cov: https://pytest-cov.readthedocs.io/
- pytest-mock: https://pytest-mock.readthedocs.io/

---

**æœ€çµ‚æ›´æ–°: 2024å¹´11æœˆ**
